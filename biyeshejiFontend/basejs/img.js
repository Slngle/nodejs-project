!function(t,n){function e(t,n){var e,o,i,r=null,a=0,l=function(){a=Date.now(),r=null,i=t.apply(e,o)};return function(){var s=Date.now(),c=n-(s-a);return e=this,o=arguments,0>=c?(clearTimeout(r),r=null,a=s,i=t.apply(e,o)):r||(r=setTimeout(l,c)),i}}function o(t,n){var e={};for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i]);return e}function i(t,n){if(t){if(n||(n={x:0,y:0}),t!=window)var e=t.getBoundingClientRect(),o=e.left,i=e.top,r=e.right,a=e.bottom;else o=0,i=0,r=o+t.innerWidth,a=i+t.innerHeight;return{left:o,top:i,right:r+n.x,bottom:a+n.y}}}function r(t,n){var e=n.right>t.left&&n.left<t.right,o=n.bottom>t.top&&n.top<t.bottom;return e&&o}function a(t){this._init(t)}var l={"class":"lazyload-img",dataSrc:"data-src",size:"200x200",sharpen:"100sh",q:"90q",lazyHeight:0,lazyWidth:0,fireEvent:"scroll"};a.prototype._init=function(t){this.config=o(l,t||{}),this.config["class"]="."!==this.config["class"].charAt(0)?this.config["class"]:this.config["class"].slice(1),"scroll"===this.config.fireEvent&&this.bindLazyEvent()},a.prototype.fireLazyload=function(){this._loadImg()},a.prototype.bindLazyEvent=function(){var t=this,n=e(t._loadImg,100);window.addEventListener("scroll",function(){n.call(t)},!1)},a.prototype._loadImg=function(){var t=this,n=t.config,e=Array.prototype.slice.call(document.querySelectorAll("."+n["class"])),o=n.dataSrc,a=i(window,{x:n.lazyWidth,y:n.lazyHeight});e.length&&e.forEach(function(e,l){var s=e.getAttribute(o);if(s){var c=i(e),u=r(a,c);u&&(s=t.getBestImgUrl(s,e),t.preloadImg(s,function(){e.removeAttribute(o),"IMG"===e.tagName?e.setAttribute("src",s):e.style.backgroundImage="url("+s+")",e.className=e.className.replace(new RegExp("(^|\\s)"+n["class"]+"(\\s|$)"),"")},function(){e.className=e.className.replace(new RegExp("(^|\\s)"+n["class"]+"(\\s|$)"),"")}))}})},a.prototype.getBestImgUrl=function(t,n){var e=t.match(/\.(jpg|png|gif|webp)$/g);if(e=e?e[0]:".jpg",".png"===e||"no"===n.getAttribute("data-cdn"))return t+"?native_cache=86400";var o,i=this.config,r=n?n.getAttribute("data-size"):"",a=n?n.getAttribute("data-quality"):"",l=i.sharpen?"_"+i.sharpen:"_100sh",s=a||(i.q?i.q:"90q"),c="";return o=r?"no"!==r?r.split("x"):[]:i.size.split("x"),o[0]&&o[1]&&(c=o[0]+"w_"+o[1]+"h_"),t+"@"+c+s+l+e+"?native_cache=86400"},a.prototype.preloadImg=function(t,n,e){var o=new Image;o.onload=function(){n&&n(),o.onload=o.onerror=null},o.onerror=function(){e&&e(),o.onload=o.onerror=null},o.src=t,o.complete&&(n&&n(),o.onload=o.onerror=null)},n.img=a}(window,window.SGLib||(window.SGLib={}));